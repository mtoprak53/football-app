=== PROJE DOSYALARI Ä°Ã‡ERÄ°KLERÄ° ===
OluÅŸturma Tarihi: Wed Dec 10 07:57:58 PM EST 2025
=====================================

HariÃ§ tutulan dizinler: no_git node_modules .next
HariÃ§ tutulan dosyalar: .env .env.local .env.development .env.production package-lock.json

Ã–nemli dosyalar iÅŸleniyor...
Ekleniyor: next.config.js

========================================
DOSYA: next.config.js
Boyut: 12 satÄ±r
========================================

/** @type {import('next').NextConfig} */

const nextConfig = {
  experimental: {
    serverComponentsExternalPackages: ['pg'],
  },
  env: {
    API_FOOTBALL_KEY: process.env.API_FOOTBALL_KEY,
    API_FOOTBALL_HOST: 'api-football-v1.p.rapidapi.com'
  }
}

module.exports = nextConfig
Ekleniyor: vercel.json

========================================
DOSYA: vercel.json
Boyut: 14 satÄ±r
========================================

{
  "version": 2,
  "builds": [
    {
      "src": "package.json",
      "use": "@vercel/next"
    }
  ],
  "crons": [
    {
      "path": "/api/cron/update-countries",
      "schedule": "0 2 * * *"
    }
  ]
}
Ekleniyor: package.json

========================================
DOSYA: package.json
Boyut: 38 satÄ±r
========================================

{
  "name": "football-app",
  "version": "1.0.0",
  "scripts": {
    "dev": "next dev",
    "dev:docker": "docker compose up --build",
    "dev:watch": "docker compose up app --build",
    "build": "next build",
    "start": "next start",
    "start:docker": "docker compose up",
    "restart:docker": "docker compose down && docker compose up --build",
    "down:docker": "docker compose down",

    "db:local": "docker compose up db -d",
    "db:logs": "docker compose logs db -f",
    "clean:docker": "docker compose down -v --remove-orphans",
    "production:build": "NODE_ENV=production npm run build",
    "update-countries": "node scripts/update-countries.js",
    
    "db:setup": "docker compose exec -T db psql -U postgres -d football -f /database/setup.sql",
    "db:reset": "docker compose down -v && docker compose up -d --wait && sleep 5 && npm run db:setup",
    "db:shell": "docker compose exec db psql -U postgres -d football",
    "db:tables": "npm run db:shell -- -c \"\\dt\"",
    "db:teams": "npm run db:shell -- -c \"SELECT id, name, country FROM teams ORDER BY name\"",
    "db:count": "npm run db:shell -- -c \"SELECT COUNT(*) as total_teams FROM teams\"",
    "db:clean": "docker compose down -v",
    
    "migrate:copy-sql": "docker compose cp database/setup.sql db:/database/setup.sql",
    "migrate:run": "npm run migrate:copy-sql && npm run db:setup"
  },
  "dependencies": {
    "next": "14.2.3",
    "react": "18.3.1",
    "react-dom": "18.3.1",
    "pg": "^8.16.3",
    "dotenv": "^16.3.1"
  }
}

Ekleniyor: README.md

========================================
DOSYA: README.md
Boyut: 270 satÄ±r
========================================


<span id="ENG"></span>

# âš½ Football App

[TÃ¼rkÃ§e](#TUR)


A modern football application with real-time match data, team information, and league standings. Built with Docker, Next.js 14, PostgreSQL, and API-Football integration.

![Docker](https://img.shields.io/badge/Docker-âœ“-blue)
![NextJS](https://img.shields.io/badge/NextJS-âœ“-black)
![React](https://img.shields.io/badge/React-âœ“-black)
![PostgreSQL](https://img.shields.io/badge/PostgreSQL-âœ“-blue)
![Vercel](https://img.shields.io/badge/Vercel_Deploy-âœ“-black)

## âœ¨ Features

- **ğŸ† Real-time Data**: Live league and team information via API-Football
- **ğŸ³ Docker Containerization**: Entire app runs in Docker containers
- **ğŸ—„ï¸ Cloud PostgreSQL**: Neon.tech cloud database with local backup
- **âš¡ Next.js 14**: Latest App Router, Server Components, API Routes
- **â° Automated Sync**: Daily cron jobs for data synchronization
- **ğŸš€ Production Ready**: Vercel deployment with CI/CD pipeline

## ğŸ› ï¸ Tech Stack

**Frontend & Backend:**
- Next.js 14 + React 18
- API Routes + Server Components
- Tailwind CSS (optional)

**Database:**
- PostgreSQL (Primary: Neon.tech, Backup: Local Docker)
- pg node.js driver

**DevOps & Infrastructure:**
- Docker + Docker Compose
- GitHub Actions CI/CD
- Vercel Deployment
- Cron Jobs for automation

**APIs:**
- API-Football (https://www.api-football.com/)

## ğŸ“¦ Quick Start

### Prerequisites
- Node.js 18+
- Docker & Docker Compose
- API-Football account (free tier available)

### Installation

1. **Clone the repository:**
```bash
git clone https://github.com/mtoprak53/football-app.git
cd football-app
```

2. **Set up environment variables:**
```bash
cp .env.example .env
# Edit .env with your credentials
```

3. **Run with Docker (Recommended):**
```bash
docker compose up --build -d
```

4. **Access the application:**
- Frontend: http://localhost:3000
- API: http://localhost:3000/api/football/ligler

### Environment Variables
```env
DATABASE_URL=postgresql://user:pass@neon-host/db?sslmode=require
API_FOOTBALL_KEY=your_api_football_key_here
```

## ğŸ—ï¸ Project Structure
```
football-app/
â”œâ”€â”€ app/                 # Next.js App Router
â”‚   â”œâ”€â”€ api/            # API Routes
â”‚   â”‚   â””â”€â”€ football/   # Football API endpoints
â”‚   â””â”€â”€ page.js         # Main page
â”œâ”€â”€ lib/                # Utilities & database
â”œâ”€â”€ scripts/            # Cron job scripts
â”œâ”€â”€ cron-job/           # Docker cron container
â”œâ”€â”€ docker-compose.yml  # Multi-container setup
â””â”€â”€ Dockerfile          # Next.js container
```

## ğŸ”„ API Endpoints

- `GET /api/football/ligler` - Get Turkish leagues
- `GET /api/football/countries` - Get countries data
- `GET /api/cron/update-countries` - Manual data sync (cron)

## ğŸ³ Docker Services

- **app**: Next.js application (port 3000)
- **db**: PostgreSQL database (port 5433)
- **cron-job**: Automated data synchronization

## ğŸš€ Deployment

### Vercel (Recommended)
1. Fork this repository
2. Connect to Vercel
3. Set environment variables in Vercel dashboard
4. Deploy automatically on git push

### Manual Vercel Deploy
```bash
npm i -g vercel
vercel --prod
```

## ğŸ“„ License

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.

## ğŸ™ Acknowledgments

- [API-Football](https://www.api-football.com/) for sports data
- [Vercel](https://vercel.com) for hosting
- [Neon.tech](https://neon.tech) for PostgreSQL hosting

---

**â­ If you liked this project, don't forget to give it a star!**

---



<span id="TUR"></span>

# âš½ Futbol UygulamasÄ±

[English](#ENG)

GerÃ§ek zamanlÄ± maÃ§ verileri, takÄ±m bilgileri ve lig sÄ±ralamalarÄ± iÃ§eren modern bir futbol uygulamasÄ±. Docker, Next.js 14, PostgreSQL ve API-Football entegrasyonu ile geliÅŸtirilmiÅŸtir.

![Docker](https://img.shields.io/badge/Docker-âœ“-blue)
![NextJS](https://img.shields.io/badge/NextJS-âœ“-black)
![React](https://img.shields.io/badge/React-âœ“-black)
![PostgreSQL](https://img.shields.io/badge/PostgreSQL-âœ“-blue)
![Vercel](https://img.shields.io/badge/Vercel_Deploy-âœ“-black)

## âœ¨ Ã–zellikler

- **ğŸ† GerÃ§ek ZamanlÄ± Veriler**: API-Football ile canlÄ± lig ve takÄ±m bilgileri
- **ğŸ³ Docker Containerization**: TÃ¼m uygulama Docker container'larÄ±nda Ã§alÄ±ÅŸÄ±r
- **ğŸ—„ï¸ Cloud PostgreSQL**: Neon.tek cloud veritabanÄ± + local yedek
- **âš¡ Next.js 14**: En son App Router, Server Components, API Routes
- **â° Otomatik Senkronizasyon**: GÃ¼nlÃ¼k cron job'lar ile veri senkronizasyonu
- **ğŸš€ Production HazÄ±r**: CI/CD pipeline ile Vercel deployment

## ğŸ› ï¸ Teknoloji Stack

**Frontend & Backend:**
- Next.js 14 + React 18
- API Routes + Server Components
- Tailwind CSS (opsiyonel)

**VeritabanÄ±:**
- PostgreSQL (Ana: Neon.tech, Yedek: Local Docker)
- pg node.js driver

**DevOps & AltyapÄ±:**
- Docker + Docker Compose
- GitHub Actions CI/CD
- Vercel Deployment
- Cron Jobs ile otomasyon

**API'ler:**
- API-Football (https://www.api-football.com/)

## ğŸ“¦ HÄ±zlÄ± BaÅŸlangÄ±Ã§

### Gereksinimler
- Node.js 18+
- Docker & Docker Compose
- API-Football hesabÄ± (Ã¼cretsiz tier mevcut)

### Kurulum

1. **Repository'yi klonlayÄ±n:**
```bash
git clone https://github.com/mtoprak53/football-app.git
cd football-app
```

2. **Environment variables'Ä± ayarlayÄ±n:**
```bash
cp .env.example .env
# .env dosyasÄ±nÄ± dÃ¼zenleyin
```

3. **Docker ile Ã§alÄ±ÅŸtÄ±rÄ±n (Ã–nerilen):**
```bash
docker compose up --build -d
```

4. **Uygulamaya eriÅŸin:**
- Frontend: http://localhost:3000
- API: http://localhost:3000/api/football/ligler

### Environment Variables
```env
DATABASE_URL=postgresql://user:pass@neon-host/db?sslmode=require
API_FOOTBALL_KEY=api_football_anahtarÄ±nÄ±z
```

## ğŸ—ï¸ Proje YapÄ±sÄ±
```
football-app/
â”œâ”€â”€ app/                 # Next.js App Router
â”‚   â”œâ”€â”€ api/            # API Routes
â”‚   â”‚   â””â”€â”€ football/   # Football API endpoint'leri
â”‚   â””â”€â”€ page.js         # Ana sayfa
â”œâ”€â”€ lib/                # Utilities & veritabanÄ±
â”œâ”€â”€ scripts/            # Cron job script'leri
â”œâ”€â”€ cron-job/           # Docker cron container
â”œâ”€â”€ docker-compose.yml  # Multi-container setup
â””â”€â”€ Dockerfile          # Next.js container
```

## ğŸ”„ API Endpoint'leri

- `GET /api/football/ligler` - TÃ¼rkiye liglerini getir
- `GET /api/football/countries` - Ãœlke verilerini getir
- `GET /api/cron/update-countries` - Manuel veri senkronizasyonu (cron)

## ğŸ³ Docker Servisleri

- **app**: Next.js uygulamasÄ± (port 3000)
- **db**: PostgreSQL veritabanÄ± (port 5433)
- **cron-job**: Otomatik veri senkronizasyonu

## ğŸš€ Deployment

### Vercel (Ã–nerilen)
1. Bu repository'yi fork edin
2. Vercel'e baÄŸlayÄ±n
3. Environment variables'Ä± Vercel dashboard'da ayarlayÄ±n
4. Git push'ta otomatik deploy

### Manuel Vercel Deploy
```bash
npm i -g vercel
vercel --prod
```

## ğŸ“„ Lisans

Bu proje MIT lisansÄ± altÄ±nda lisanslanmÄ±ÅŸtÄ±r - detaylar iÃ§in [LICENSE](LICENSE) dosyasÄ±na bakÄ±n.

## ğŸ™ TeÅŸekkÃ¼rler

- Spor verileri iÃ§in [API-Football](https://www.api-football.com/)
- Hosting iÃ§in [Vercel](https://vercel.com)
- PostgreSQL hosting iÃ§in [Neon.tech](https://neon.tech)

---

**â­ EÄŸer bu projeyi beÄŸendiyseniz, yÄ±ldÄ±z vermeyi unutmayÄ±n!**
Ekleniyor: LICENSE

========================================
DOSYA: LICENSE
Boyut: 20 satÄ±r
========================================

MIT License

Copyright (c) 2025 Mehmet Toprak

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
Ekleniyor: docker-compose.yml

========================================
DOSYA: docker-compose.yml
Boyut: 60 satÄ±r
========================================

services:
  app:
    build: .
    ports:
      - "3000:3000"
    volumes:
      - .:/app
      - /app/node_modules
      - ./database:/database:ro  # ğŸ‘ˆ SQL script'leri iÃ§in
    env_file:
      - .env.development
    environment:
      - NODE_ENV=development
    depends_on:
      db:
        condition: service_healthy
    networks:
      - football-network
    restart: unless-stopped

  db:
    image: postgres:15
    environment:
      POSTGRES_PASSWORD: mysecretpassword
      POSTGRES_DB: football
      POSTGRES_USER: postgres
    ports:
      - "5433:5432"
    volumes:
      - postgres_data:/var/lib/postgresql/data  # ğŸ‘ˆ BU SATIR Ã–NEMLÄ°!
      - ./database:/database:ro  # ğŸ‘ˆ SQL script'leri iÃ§in
    networks:
      - football-network
    healthcheck:
      test: ["CMD-SHELL", "pg_isready -U postgres"]
      interval: 5s
      timeout: 5s
      retries: 5
    restart: unless-stopped

  cron-job:
    build: 
      context: .
      dockerfile: cron-job/Dockerfile
    env_file:
      - .env.development
    depends_on:
      db:
        condition: service_healthy
    networks:
      - football-network
    restart: unless-stopped

# ğŸ‘‡ BU BÃ–LÃœM MUTLAKA OLMALI!
networks:
  football-network:
    driver: bridge

volumes:
  postgres_data:  # ğŸ‘ˆ BU TANIM MUTLAKA OLMALI!
    driver: local
Ekleniyor: dockerfile

========================================
DOSYA: dockerfile
Boyut: 7 satÄ±r
========================================

FROM node:18-bullseye

WORKDIR /app
COPY package*.json ./
RUN npm install
COPY . .
EXPOSE 3000
CMD ["npm", "run", "dev"]
Ekleniyor: .env.example

========================================
DOSYA: .env.example
Boyut: 14 satÄ±r
========================================

# ğŸ› ï¸ DEVELOPMENT (Docker)
DB_HOST=football-db
DB_PORT=5432
DB_NAME=football
DB_USER=postgres
DB_PASSWORD=mysecretpassword

# ğŸš€ PRODUCTION (Neon.tech)
DATABASE_URL=postgresql://user:password@neon-host/db?sslmode=require

# ğŸ† API-FOOTBALL (Both)
API_FOOTBALL_KEY=your_api_football_key_here

# ğŸ” PRODUCTION ONLY
CRON_SECRET=your_cron_secret_here
Ekleniyor: app/layout.js

========================================
DOSYA: app/layout.js
Boyut: 6 satÄ±r
========================================

export default function RootLayout({ children }) {
  return (
    <html lang="tr">
      <body>{children}</body>
    </html>
  );
}
Ekleniyor: app/page.js

========================================
DOSYA: app/page.js
Boyut: 116 satÄ±r
========================================

import Link from 'next/link';

async function getLeagues() {
  try {
    const res = await fetch('http://localhost:3000/api/football/ligler', {
      cache: 'no-store'
    });
    const data = await res.json();
    return data;
  } catch (error) {
    console.error('Ligler API hatasÄ±:', error);
    return { success: false, ligler: [] }; // Eski yapÄ±yÄ± koru
  }
}

async function getDatabaseTeams() {
  try {
    const res = await fetch('http://localhost:3000/api/teams', {
      cache: 'no-store'
    });
    const data = await res.json();
    return data;
  } catch (error) {
    console.error('Teams API hatasÄ±:', error);
    return { success: false, teams: [] };
  }
}

export default async function Home() {
  const [footballData, dbTeams] = await Promise.all([
    getLeagues(),
    getDatabaseTeams()
  ]);

  return (
    <main style={{ padding: '20px', fontFamily: 'Arial' }}>
      <h1>âš½ Football App - LIVE DATA</h1>
      <p>Working with real API-Football data!</p>
      
      <h2>ğŸ‡¹ğŸ‡· Turkey Leagues:</h2>
      
      {footballData.success && footballData.ligler && footballData.ligler.length > 0 ? (
        <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(250px, 1fr))', gap: '15px' }}>
          {footballData.ligler.map((lig, index) => (
            <div key={index} style={{ 
              border: '1px solid #ddd', 
              padding: '15px', 
              borderRadius: '8px',
              backgroundColor: '#f9f9f9'
            }}>
              <h3>ğŸ† {lig.league?.name || 'Unknown League'}</h3>
              <p><strong>Season:</strong> {lig.seasons?.[0]?.year || 'Unknown'}</p>
              <p><strong>Start:</strong> {lig.seasons?.[0]?.start || 'Unknown'}</p>
              <p><strong>End:</strong> {lig.seasons?.[0]?.end || 'Unknown'}</p>
              {lig.league?.logo && (
                <img 
                  src={lig.league.logo} 
                  alt={lig.league.name}
                  style={{ width: '50px', height: '50px' }}
                />
              )}
            </div>
          ))}
        </div>
      ) : (
        <div>
          <p>âŒ API connection error or no leagues found.</p>
          <div style={{ marginTop: '10px' }}>
            <Link href="/api/football/ligler" style={{ color: 'blue', textDecoration: 'none' }}>
              ğŸ”„ Retry Leagues API
            </Link>
          </div>
        </div>
      )}
      
      <hr style={{ margin: '30px 0' }} />
      
      <h2>ğŸ—„ï¸ Database Teams:</h2>
      
      {dbTeams.success && dbTeams.teams && dbTeams.teams.length > 0 ? (
        <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(250px, 1fr))', gap: '15px' }}>
          {dbTeams.teams.map(team => (
            <div key={team.id} style={{ 
              border: '1px solid #ddd', 
              padding: '15px', 
              borderRadius: '8px',
              backgroundColor: '#f0f8ff'
            }}>
              <h3>ğŸŸï¸ {team.name}</h3>
              <p><strong>Country:</strong> {team.country}</p>
              <p><strong>Founded:</strong> {team.founded_year}</p>
              {team.stadium && <p><strong>Stadium:</strong> {team.stadium}</p>}
              {team.manager && <p><strong>Manager:</strong> {team.manager}</p>}
              {team.league && <p><strong>League:</strong> {team.league}</p>}
              <Link href={`/api/teams/${team.id}`} style={{ color: 'blue', textDecoration: 'none' }}>
                ğŸ” View Details â†’
              </Link>
            </div>
          ))}
        </div>
      ) : (
        <div>
          <p>âŒ Database connection error or no teams added yet.</p>
          <div style={{ marginTop: '10px' }}>
            <Link href="/api/football/countries" style={{ color: 'green', textDecoration: 'none' }}>
              ğŸŒ Load Countries
            </Link>
            <span style={{ margin: '0 10px' }}>|</span>
            <Link href="/api/teams" style={{ color: 'purple', textDecoration: 'none' }}>
              ğŸŸï¸ View Teams API
            </Link>
          </div>
        </div>
      )}
    </main>
  );
}
Ekleniyor: app/debug/page.js

========================================
DOSYA: app/debug/page.js
Boyut: 9 satÄ±r
========================================

// app/debug/page.tsx
export default function DebugPage() {
  return (
    <div>
      <h2>Environment Variables:</h2>
      <p>API URL: {process.env.NEXT_PUBLIC_API_URL || 'Not set'}</p>
      <p>Database: {process.env.DATABASE_URL ? 'Set' : 'Not set'}</p>
    </div>
  );
}
Ekleniyor: lib/db.js

========================================
DOSYA: lib/db.js
Boyut: 67 satÄ±r
========================================

import { Pool } from 'pg';

class DatabaseManager {
  constructor() {
    this.pool = this.createPool();
    console.log(`ğŸ—„ï¸ Database connected: ${this.getDatabaseInfo()}`);
  }

  createPool() {
    // PRODUCTION: Neon.tech (DATABASE_URL)
    if (process.env.DATABASE_URL && process.env.NODE_ENV === 'production') {
      console.log('â˜ï¸ Using Neon.tech PostgreSQL (Production)');
      return new Pool({
        connectionString: process.env.DATABASE_URL,
        ssl: { rejectUnauthorized: false },
        max: 20, // Production connection limit
        idleTimeoutMillis: 30000,
        connectionTimeoutMillis: 10000,
      });
    }
    
    // DEVELOPMENT: Local Docker PostgreSQL
    console.log('ğŸ³ Using Local Docker PostgreSQL (Development)');
    return new Pool({
      user: process.env.DB_USER || 'postgres',
      host: process.env.DB_HOST || 'football-app-db-1',
      database: process.env.DB_NAME || 'football',
      password: process.env.DB_PASSWORD || 'mysecretpassword',
      port: parseInt(process.env.DB_PORT) || 5432,
      max: 10, // Development connection limit
      idleTimeoutMillis: 30000,
      connectionTimeoutMillis: 5000,
    });
  }

  getDatabaseInfo() {
    if (process.env.DATABASE_URL && process.env.NODE_ENV === 'production') {
      const url = new URL(process.env.DATABASE_URL);
      return `Neon.tech (${url.hostname})`;
    }
    return `Local Docker (${process.env.DB_HOST}:${process.env.DB_PORT})`;
  }

  async query(text, params) {
    const start = Date.now();
    try {
      const result = await this.pool.query(text, params);
      const duration = Date.now() - start;
      
      if (process.env.DEBUG === 'true') {
        console.log(`ğŸ“Š Executed query in ${duration}ms:`, { text, params });
      }
      
      return result;
    } catch (error) {
      console.error('âŒ Database query error:', error);
      throw error;
    }
  }

  async connect() {
    return await this.pool.connect();
  }
}

// Singleton instance
const db = new DatabaseManager();
export default db;
Ekleniyor: database/setup.sql

========================================
DOSYA: database/setup.sql
Boyut: 52 satÄ±r
========================================

-- Football App Database Setup - English Schema
-- =============================================

-- Drop existing table if needed
DROP TABLE IF EXISTS teams CASCADE;

-- Create teams table (English) with UNIQUE constraint
CREATE TABLE teams (
    id SERIAL PRIMARY KEY,
    name VARCHAR(100) NOT NULL UNIQUE,  -- ğŸ‘ˆ UNIQUE EKLENDÄ°
    country VARCHAR(50),
    founded_year INTEGER,
    logo_url TEXT,
    stadium VARCHAR(100),
    manager VARCHAR(100),
    league VARCHAR(50),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- Insert sample teams data (NOW WITH UNIQUE CONSTRAINT)
INSERT INTO teams (name, country, founded_year, stadium, manager, league) VALUES 
('Galatasaray', 'Turkey', 1905, 'Rams Park', 'Okan Buruk', 'Super Lig'),
('FenerbahÃ§e', 'Turkey', 1907, 'Ãœlker Stadium', 'Ä°smail Kartal', 'Super Lig'),
('BeÅŸiktaÅŸ', 'Turkey', 1903, 'Vodafone Park', 'Fernando Santos', 'Super Lig'),
('Trabzonspor', 'Turkey', 1967, 'Åenol GÃ¼neÅŸ Stadium', 'Abdullah AvcÄ±', 'Super Lig'),
('Manchester City', 'England', 1880, 'Etihad Stadium', 'Pep Guardiola', 'Premier League'),
('Barcelona', 'Spain', 1899, 'Camp Nou', 'Xavi HernÃ¡ndez', 'La Liga'),
('Real Madrid', 'Spain', 1902, 'Santiago BernabÃ©u', 'Carlo Ancelotti', 'La Liga'),
('Bayern Munich', 'Germany', 1900, 'Allianz Arena', 'Thomas Tuchel', 'Bundesliga'),
('Paris Saint-Germain', 'France', 1970, 'Parc des Princes', 'Luis Enrique', 'Ligue 1'),
('Juventus', 'Italy', 1897, 'Allianz Stadium', 'Massimiliano Allegri', 'Serie A')
ON CONFLICT (name) DO NOTHING;

-- Create update trigger for teams
CREATE OR REPLACE FUNCTION update_updated_at_column()
RETURNS TRIGGER AS $$
BEGIN
    NEW.updated_at = CURRENT_TIMESTAMP;
    RETURN NEW;
END;
$$ language 'plpgsql';

-- Drop trigger if exists and recreate
DROP TRIGGER IF EXISTS update_teams_updated_at ON teams;
CREATE TRIGGER update_teams_updated_at 
BEFORE UPDATE ON teams 
FOR EACH ROW EXECUTE FUNCTION update_updated_at_column();

-- Verification queries
SELECT 'âœ… Database setup completed successfully!' as message;
SELECT 'ğŸ“Š Total teams:' as info, COUNT(*) as count FROM teams;
SELECT 'ğŸ† Sample teams:' as info, name, country FROM teams ORDER BY name LIMIT 5;
Ekleniyor: scripts/update-countries.js

========================================
DOSYA: scripts/update-countries.js
Boyut: 77 satÄ±r
========================================

require('dotenv').config();
const { Pool } = require('pg');

const pool = new Pool({
  user: process.env.DB_USER || 'postgres',
  host: process.env.DB_HOST || 'localhost',
  database: process.env.DB_NAME || 'football',
  password: process.env.DB_PASSWORD || 'mysecretpassword',
  port: parseInt(process.env.DB_PORT) || 5432,
});


async function updateCountries() {
  console.log(`ğŸ”„ [${new Date().toISOString()}] Countries gÃ¼ncelleme baÅŸlÄ±yor...`);
  console.log(`ğŸ”— Script database: ${process.env.DB_HOST}:${process.env.DB_PORT}`);
  // console.log(`ğŸ“ Database host: ${dbHost}:${pool.options.port}`);
  
  const options = {
    method: 'GET',
    headers: {
      'X-RapidAPI-Key': process.env.API_FOOTBALL_KEY,
      'X-RapidAPI-Host': 'api-football-v1.p.rapidapi.com'
    }
  };

  try {
    const response = await fetch('https://api-football-v1.p.rapidapi.com/v3/countries', options);
    
    if (!response.ok) {
      throw new Error(`API hatasÄ±: ${response.status} ${response.statusText}`);
    }
    
    const data = await response.json();
    
    console.log(`ğŸ“Š API'den ${data.response?.length || 0} Ã¼lke alÄ±ndÄ±`);
    
    const client = await pool.connect();
    
    let inserted = 0;
    let updated = 0;
    
    for (const country of data.response || []) {
      if (!country.code) continue;
      
      const result = await client.query(`
        INSERT INTO countries (name, code, flag_url) 
        VALUES ($1, $2, $3)
        ON CONFLICT (code) 
        DO UPDATE SET 
          name = EXCLUDED.name,
          flag_url = EXCLUDED.flag_url
        RETURNING xmax::text::int
      `, [country.name, country.code, country.flag]);
      
      if (result.rows[0].xmax === 0) {
        inserted++;
      } else {
        updated++;
      }
    }
    
    client.release();

    console.log(`âœ… [${new Date().toISOString()}] ${inserted} yeni eklendi, ${updated} gÃ¼ncellendi`);
    
  } catch (error) {
    console.error(`âŒ [${new Date().toISOString()}] Hata:`, error.message);
  } finally {
    await pool.end();
  }
}

// Script doÄŸrudan Ã§alÄ±ÅŸtÄ±rÄ±lÄ±yorsa
if (require.main === module) {
  updateCountries();
}

module.exports = updateCountries;

=== APP DÄ°ZÄ°NÄ° ROUTE.JS DOSYALARI ===
Ekleniyor: app/api/teams/[id]/route.js

========================================
DOSYA: app/api/teams/[id]/route.js
Boyut: 36 satÄ±r
========================================

import { Pool } from 'pg';

const pool = new Pool({
  connectionString: process.env.DATABASE_URL || 
    `postgresql://${process.env.DB_USER || 'postgres'}:${process.env.DB_PASSWORD || 'mysecretpassword'}@${process.env.DB_HOST || 'localhost'}:${process.env.DB_PORT || 5432}/${process.env.DB_NAME || 'football'}`,
  ssl: process.env.NODE_ENV === 'production' ? { rejectUnauthorized: false } : false
});

export async function GET(request, { params }) {
  try {
    const { id } = params;
    console.log(`ğŸ” Fetching team with ID: ${id}`);
    
    const result = await pool.query(
      'SELECT * FROM teams WHERE id = $1',
      [id]
    );

    if (result.rows.length === 0) {
      return Response.json({
        success: false,
        error: 'Team not found'
      }, { status: 404 });
    }

    return Response.json({
      success: true,
      team: result.rows[0]
    });
  } catch (error) {
    console.error('âŒ Database error:', error.message);
    return Response.json({
      success: false,
      error: error.message
    }, { status: 500 });
  }
}
Ekleniyor: app/api/teams/route.js

========================================
DOSYA: app/api/teams/route.js
Boyut: 31 satÄ±r
========================================

import { Pool } from 'pg';

// Database connection - both production and development
const pool = new Pool({
  connectionString: process.env.DATABASE_URL || 
    `postgresql://${process.env.DB_USER || 'postgres'}:${process.env.DB_PASSWORD || 'mysecretpassword'}@${process.env.DB_HOST || 'localhost'}:${process.env.DB_PORT || 5432}/${process.env.DB_NAME || 'football'}`,
  ssl: process.env.NODE_ENV === 'production' ? { rejectUnauthorized: false } : false
});

export async function GET() {
  try {
    console.log('ğŸ” Fetching teams from database...');
    
    const result = await pool.query(`
      SELECT * FROM teams 
      ORDER BY name
    `);
    
    console.log(`âœ… Found ${result.rows.length} teams`);
    
    return Response.json({
      success: true,
      teams: result.rows
    });
  } catch (error) {
    console.error('âŒ Database error:', error.message);
    return Response.json({
      success: false,
      error: error.message
    }, { status: 500 });
  }
}
Ekleniyor: app/api/takimlar/[id]/route.js

========================================
DOSYA: app/api/takimlar/[id]/route.js
Boyut: 44 satÄ±r
========================================

import { Pool } from 'pg';

const pool = new Pool({
  user: 'postgres',
  host: 'football-db',
  database: 'football',
  password: 'mysecretpassword',
  port: 5432,
});

export async function GET(request, { params }) {
  try {
    const { id } = params;
    const client = await pool.connect();
    
    const result = await client.query(`
      SELECT 
        dt.*,
        l.ad as lig_adi,
        l.ulke as lig_ulkesi
      FROM detayli_takimlar dt
      LEFT JOIN ligler l ON dt.lig_id = l.id
      WHERE dt.id = $1
    `, [id]);
    
    client.release();

    if (result.rows.length === 0) {
      return Response.json({ 
        success: false,
        error: 'TakÄ±m bulunamadÄ±' 
      }, { status: 404 });
    }

    return Response.json({ 
      success: true,
      takim: result.rows[0]
    });
  } catch (error) {
    return Response.json({ 
      success: false,
      error: error.message 
    }, { status: 500 });
  }
}
Ekleniyor: app/api/takimlar/route.js

========================================
DOSYA: app/api/takimlar/route.js
Boyut: 26 satÄ±r
========================================

import { Pool } from 'pg';

const pool = new Pool({
  user: 'postgres',
  host: 'football-app-db-1',
  database: 'football',
  password: 'mysecretpassword',
  port: 5432,
});

export async function GET() {
  try {
    const client = await pool.connect();
    const result = await client.query('SELECT * FROM takimlar');
    client.release();
    
    return Response.json({ 
      success: true,
      takimlar: result.rows 
    });
  } catch (error) {
    return Response.json({ 
      success: false,
      error: error.message 
    }, { status: 500 });
  }
}
Ekleniyor: app/api/hello/route.js

========================================
DOSYA: app/api/hello/route.js
Boyut: 5 satÄ±r
========================================

export async function GET() {
  return Response.json({ 
    message: 'Merhaba Football API!',
    timestamp: new Date().toISOString()
  });
}
Ekleniyor: app/api/cron/update-countries/route.js

========================================
DOSYA: app/api/cron/update-countries/route.js
Boyut: 56 satÄ±r
========================================

import { Pool } from 'pg';

const pool = new Pool({
  connectionString: process.env.DATABASE_URL,
  ssl: { rejectUnauthorized: false }
});

export async function GET(request) {
  // Cron secret kontrolÃ¼ (Vercel cron'larÄ± iÃ§in)
  const authHeader = request.headers.get('Authorization');
  if (authHeader !== `Bearer ${process.env.CRON_SECRET}`) {
    return Response.json({ error: 'Unauthorized' }, { status: 401 });
  }

  const options = {
    method: 'GET',
    headers: {
      'X-RapidAPI-Key': process.env.API_FOOTBALL_KEY,
      'X-RapidAPI-Host': 'api-football-v1.p.rapidapi.com'
    }
  };

  try {
    const response = await fetch('https://api-football-v1.p.rapidapi.com/v3/countries', options);
    const data = await response.json();
    
    const client = await pool.connect();
    let inserted = 0;
    let updated = 0;
    
    for (const country of data.response) {
      if (!country.code) continue;
      
      const result = await client.query(`
        INSERT INTO countries (name, code, flag_url) 
        VALUES ($1, $2, $3)
        ON CONFLICT (code) 
        DO UPDATE SET 
          name = EXCLUDED.name,
          flag_url = EXCLUDED.flag_url
        RETURNING xmax::text::int
      `, [country.name, country.code, country.flag]);
      
      if (result.rows[0].xmax === 0) inserted++;
      else updated++;
    }
    
    client.release();

    return Response.json({
      success: true,
      message: `${inserted} yeni Ã¼lke eklendi, ${updated} Ã¼lke gÃ¼ncellendi`
    });
  } catch (error) {
    return Response.json({ error: error.message }, { status: 500 });
  }
}
Ekleniyor: app/api/football/ligler/route.js

========================================
DOSYA: app/api/football/ligler/route.js
Boyut: 35 satÄ±r
========================================

import { Pool } from 'pg';

const pool = new Pool({
  connectionString: process.env.DATABASE_URL,
  ssl: process.env.NODE_ENV === 'production' ? { rejectUnauthorized: false } : false
});

export async function GET() {
  const currentYear = new Date().getFullYear();
  const options = {
    method: 'GET',
    headers: {
      'X-RapidAPI-Key': process.env.API_FOOTBALL_KEY,
      'X-RapidAPI-Host': 'api-football-v1.p.rapidapi.com'
    }
  };

  try {
    const response = await fetch(
      `https://api-football-v1.p.rapidapi.com/v3/leagues?country=Turkey&season=${currentYear}`, 
      options
    );
    const data = await response.json();

    return Response.json({
      success: true,
      ligler: data.response || [],
      season: currentYear
    });
  } catch (error) {
    return Response.json({
      success: false,
      error: error.message
    }, { status: 500 });
  }
}
Ekleniyor: app/api/football/countries/route.js

========================================
DOSYA: app/api/football/countries/route.js
Boyut: 60 satÄ±r
========================================

import { Pool } from 'pg';

const pool = new Pool({
  connectionString: process.env.DATABASE_URL,
  ssl: { rejectUnauthorized: false }
});

export async function GET() {
  const options = {
    method: 'GET',
    headers: {
      'X-RapidAPI-Key': process.env.API_FOOTBALL_KEY,
      'X-RapidAPI-Host': 'api-football-v1.p.rapidapi.com'
    }
  };

  try {
    // API'den Ã¼lkeleri Ã§ek
    const response = await fetch('https://api-football-v1.p.rapidapi.com/v3/countries', options);
    const data = await response.json();
    
    const client = await pool.connect();
    
    let inserted = 0;
    let updated = 0;
    
    // Her Ã¼lkeyi veritabanÄ±na kaydet
    for (const country of data.response) {
      if (!country.code) continue;
      
      const result = await client.query(`
        INSERT INTO countries (name, code, flag_url) 
        VALUES ($1, $2, $3)
        ON CONFLICT (code) 
        DO UPDATE SET 
          name = EXCLUDED.name,
          flag_url = EXCLUDED.flag_url
        RETURNING xmax::text::int
      `, [country.name, country.code, country.flag]);
      
      if (result.rows[0].xmax === 0) {
        inserted++;
      } else {
        updated++;
      }
    }
    
    client.release();

    return Response.json({
      success: true,
      message: `${inserted} yeni Ã¼lke eklendi, ${updated} Ã¼lke gÃ¼ncellendi`,
      count: inserted + updated
    });
  } catch (error) {
    return Response.json({
      success: false,
      error: error.message
    }, { status: 500 });
  }
}

=== COMPONENTS DÄ°ZÄ°NÄ° DOSYALARI ===

=== CRON-JOB DÄ°ZÄ°NÄ° DOSYALARI ===

=== DÄ°ÄER Ã–NEMLÄ° DOSYALAR ===
Ekleniyor: .vercel/project.json

========================================
DOSYA: ./.vercel/project.json
Boyut: 0 satÄ±r
========================================

{"projectId":"prj_fq4TKBc3HrsClLsyNoXexlpqHJwd","orgId":"team_lSi7pOAAIzx5T6ilSeYvBUes","projectName":"football-app"}
Ekleniyor: .vercel/README.txt

========================================
DOSYA: ./.vercel/README.txt
Boyut: 11 satÄ±r
========================================

> Why do I have a folder named ".vercel" in my project?
The ".vercel" folder is created when you link a directory to a Vercel project.

> What does the "project.json" file contain?
The "project.json" file contains:
- The ID of the Vercel project that you linked ("projectId")
- The ID of the user or team your Vercel project is owned by ("orgId")

> Should I commit the ".vercel" folder?
No, you should not share the ".vercel" folder with anyone.
Upon creation, it will be automatically added to your ".gitignore" file.

Ekleniyor: proje_icerikleri.txt

========================================
DOSYA: ./proje_icerikleri.txt
Boyut: 1278 satÄ±r
========================================


Ekleniyor: jsconfig.json

========================================
DOSYA: ./jsconfig.json
Boyut: 8 satÄ±r
========================================

{
  "compilerOptions": {
    "baseUrl": ".",
    "paths": {
      "@/*": ["./*"]
    }
  }
}

Ekleniyor: project_writer_next.sh

========================================
DOSYA: ./project_writer_next.sh
Boyut: 164 satÄ±r
========================================

#!/bin/bash

# Ã‡Ä±ktÄ± dosyasÄ±
OUTPUT_FILE="proje_icerikleri.txt"

echo "=== PROJE DOSYALARI Ä°Ã‡ERÄ°KLERÄ° ===" > "$OUTPUT_FILE"
echo "OluÅŸturma Tarihi: $(date)" >> "$OUTPUT_FILE"
echo "=====================================" >> "$OUTPUT_FILE"
echo "" >> "$OUTPUT_FILE"

# HariÃ§ tutulacak dizinler ve dosyalar
EXCLUDE_DIRS="no_git node_modules .next"
EXCLUDE_FILES=".env .env.local .env.development .env.production package-lock.json"

echo "HariÃ§ tutulan dizinler: $EXCLUDE_DIRS" >> "$OUTPUT_FILE"
echo "HariÃ§ tutulan dosyalar: $EXCLUDE_FILES" >> "$OUTPUT_FILE"
echo "" >> "$OUTPUT_FILE"

# Dosya ekleme fonksiyonu
add_file() {
    local file="$1"
    if [[ -f "$file" && -r "$file" ]]; then
        echo "" >> "$OUTPUT_FILE"
        echo "========================================" >> "$OUTPUT_FILE"
        echo "DOSYA: $file" >> "$OUTPUT_FILE"
        echo "Boyut: $(wc -l < "$file") satÄ±r" >> "$OUTPUT_FILE"
        echo "========================================" >> "$OUTPUT_FILE"
        echo "" >> "$OUTPUT_FILE"
        
        # JSON dosyalarÄ±nÄ± formatlÄ± gÃ¶ster (eÄŸer jq varsa)
        if [[ "$file" == *.json ]] && command -v jq &> /dev/null; then
            jq . "$file" 2>/dev/null >> "$OUTPUT_FILE" || cat "$file" >> "$OUTPUT_FILE"
        else
            cat "$file" >> "$OUTPUT_FILE"
        fi
        
        echo "" >> "$OUTPUT_FILE"
    fi
}

# Ã–nemli dosya listesi
important_files=(
    # KÃ¶k dizin dosyalarÄ±
    "next.config.js"
    "vercel.json"
    "package.json"
    "README.md"
    "LICENSE"
    "docker-compose.yml"
    "Dockerfile"
    "dockerfile"
    "jsonfig.json"
    ".env.example"
    "project_backup.txt"
    
    # App dizini
    "app/layout.js"
    "app/page.js"
    "app/debug/page.js"
    
    # Lib dizini
    "lib/db.js"
    
    # Database dizini
    "database/setup.sql"
    
    # Scripts dizini
    "scripts/update-countries.js"
)

echo "Ã–nemli dosyalar iÅŸleniyor..." | tee -a "$OUTPUT_FILE"

# Ã–nemli dosyalarÄ± ekle
for file in "${important_files[@]}"; do
    if [[ -f "$file" ]]; then
        echo "Ekleniyor: $file" | tee -a "$OUTPUT_FILE"
        add_file "$file"
    fi
done

# App dizinindeki route.js dosyalarÄ±nÄ± ekle (Ã¶zyinelemeli)
echo "" >> "$OUTPUT_FILE"
echo "=== APP DÄ°ZÄ°NÄ° ROUTE.JS DOSYALARI ===" >> "$OUTPUT_FILE"
find app -name "route.js" -type f ! -path "*/.next/*" ! -path "*/node_modules/*" | while read -r file; do
    echo "Ekleniyor: $file" | tee -a "$OUTPUT_FILE"
    add_file "$file"
done

# Components dizinindeki dosyalarÄ± ekle
echo "" >> "$OUTPUT_FILE"
echo "=== COMPONENTS DÄ°ZÄ°NÄ° DOSYALARI ===" >> "$OUTPUT_FILE"
if [[ -d "components" ]]; then
    find components -type f \( -name "*.js" -o -name "*.jsx" -o -name "*.ts" -o -name "*.tsx" \) \
        ! -path "*/.next/*" ! -path "*/node_modules/*" | while read -r file; do
        echo "Ekleniyor: $file" | tee -a "$OUTPUT_FILE"
        add_file "$file"
    done
fi

# Cron-job dizinindeki dosyalarÄ± ekle
echo "" >> "$OUTPUT_FILE"
echo "=== CRON-JOB DÄ°ZÄ°NÄ° DOSYALARI ===" >> "$OUTPUT_FILE"
if [[ -d "cron-job" ]]; then
    find cron-job -type f \( -name "*.js" -o -name "*.py" -o -name "*.sh" \) \
        ! -path "*/.next/*" ! -path "*/node_modules/*" | while read -r file; do
        echo "Ekleniyor: $file" | tee -a "$OUTPUT_FILE"
        add_file "$file"
    done
fi

# DiÄŸer tÃ¼m Ã¶nemli dosyalarÄ± bul ve ekle (Ã¶zyinelemeli)
echo "" >> "$OUTPUT_FILE"
echo "=== DÄ°ÄER Ã–NEMLÄ° DOSYALAR ===" >> "$OUTPUT_FILE"
find . -type f \( \
    -name "*.js" -o \
    -name "*.jsx" -o \
    -name "*.ts" -o \
    -name "*.tsx" -o \
    -name "*.json" ! -name "package-lock.json" -o \
    -name "*.md" -o \
    -name "*.txt" -o \
    -name "*.sql" -o \
    -name "*.yml" -o \
    -name "*.yaml" -o \
    -name "*.sh" -o \
    -name "*.config.js" -o \
    -name "*.config.ts" -o \
    -name "Dockerfile" -o \
    -name "dockerfile" -o \
    -name "docker-compose.yml" \
    \) \
    ! -path "./no_git/*" \
    ! -path "./node_modules/*" \
    ! -path "*/.next/*" \
    ! -name ".env" \
    ! -name ".env.local" \
    ! -name ".env.development" \
    ! -name ".env.production" \
    | grep -v "^./.next/" \
    | while read -r file; do
    
    # Zaten eklenmiÅŸ dosyalarÄ± atla
    already_added=false
    for added_file in "${important_files[@]}"; do
        if [[ "$file" == "./$added_file" ]] || [[ "$file" == "$added_file" ]]; then
            already_added=true
            break
        fi
    done
    
    if ! $already_added && [[ ! "$file" =~ ^./app/.*/route\.js$ ]] && [[ ! "$file" =~ ^./components/ ]] && [[ ! "$file" =~ ^./cron-job/ ]]; then
        echo "Ekleniyor: ${file#./}" | tee -a "$OUTPUT_FILE"
        add_file "$file"
    fi
done

echo "" >> "$OUTPUT_FILE"
echo "=== Ä°ÅLEM TAMAMLANDI ===" >> "$OUTPUT_FILE"
echo "Toplam dosya sayÄ±sÄ±: $(grep -c "DOSYA:" "$OUTPUT_FILE")" >> "$OUTPUT_FILE"
echo "Ã‡Ä±ktÄ± dosyasÄ±: $OUTPUT_FILE ($(wc -l < "$OUTPUT_FILE") satÄ±r)" >> "$OUTPUT_FILE"

echo ""
echo "âœ“ Ä°ÅŸlem tamamlandÄ±!"
echo "âœ“ Ã‡Ä±ktÄ± dosyasÄ±: $OUTPUT_FILE"
echo "âœ“ HariÃ§ tutulanlar: no_git, node_modules, .next, .env*, package-lock.json"

=== Ä°ÅLEM TAMAMLANDI ===
Toplam dosya sayÄ±sÄ±: 29
Ã‡Ä±ktÄ± dosyasÄ±: proje_icerikleri.txt (1473 satÄ±r)
